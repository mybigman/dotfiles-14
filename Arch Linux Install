################################################################################################
# Criador: Franklin Souza
# Telegram: @FranklinTech                                                                                                                                                             
#
# ESSE TUTORIAL FOI REALIZADO EM UM COMPUTADOR DESKTOP, UTILIZANDO REDE CABEADA EM LEGACY E UEFI
# Não responsabilizo por danos, essa é MINHA INSTALAÇÃO, só estou salvando aqui caso eu precise 
# SE QUISER FAZER O TESTE, FAÇA EM UMA VM (VIRTUAL MACHINE)
# Recomendo ler: https://wiki.archlinux.org/index.php/Installation_guide_(Portugu%C3%AAs) 
################################################################################################
################################################################################################

➜ Layout teclado
loadkeys br-abnt2

➜ Mudar tamanho da fonte (OPCIONAL)
setfont lat4-19

➜ Mudar idioma da instalação (OPCIONAL)
nano /etc/locale.gen

➜ Descomentar a linha:
#pt_BR.UTF-8

➜ Execute os comandos:
locale-gen
export LANG=pt_BR.UTF-8

➜ Atualizar base de dados
pacman -Syy

➜ Suporte para chaves (OPCIONAL)
pacman -S archlinux-keyring

➜ Separar as partições
cfdisk

➜ Formatar as partições
mkfs.vfat -F32 # Formatar BOOT UEFI
mkfs.ext4 # Formatar partição
mkswpap # Formatar swap (caso tenha)

➜ Montar partições
mount # Montar as partições
swapon # Montar swap (caso tenha)
mkdir -p /mnt/boot/efi && mount /dev/sdaX /mnt/boot/efi

➜ Instalar sistema base
pacstrap /mnt base linux-firmware base-devel - (base-devel é opcional, mas eu recomendo instalar)

➜ Gerar FSTAB
genfstab -p /mnt >> /mnt/etc/fstab

➜ Entrar no chroot
arch-chroot /mnt

# Escolha suas opções

# INTERNET
# OPÇÃO 1 (Recomendado para rede cabeada)
pacman -S dhcpcd
systemctl enable dhcpcd

# Opção 2 (Recomendado para notebooks - WIFI)
pacman -S networkmanager
systemctl enable NetworkManager

# EDITORES
# OPÇÃO 1
pacman -S vim

# OPÇÃO 2
pacman -S nano

➜ Setar o fuso horário do sistema (OPCIONAL)
ln -sf /usr/share/zoneinfo/America/Recife /etc/localtime

➜ Setar o horário no sistema
hwclock --systohc

➜ Time Date
timedatectl set-ntp true

➜ Mudando o idioma do SISTEMA (OPCIONAL)
vim /etc/locale.gen

➜ Descomentar linha:
#pt_BR.UTF-8

➜ Executar comandos
locale-gen
echo LANG=pt_BR.UTF-8 > /etc/locale.conf
export LANG=pt_BR.UTF-8

➜ Configurar o teclado para subir em PT-BR
echo KEYMAP=br-abnt2 > /etc/vconsole.conf

➜ Colocar nome host
echo LOCALHOST > /etc/hostname

➜ Baixar kernels (sua preferência)
pacman -S linux linux-headers ➜ Kernel Stable (default)
pacman -S linux-hardened linux-hardened-headers ➜ Kernel focado na segurança
pacman -S linux-lts linux-lts-headers ➜ Kernel a longo prazo
pacman -S linux-zen linux-zen-headers ➜ Kernel focado em desempenho

➜ Rodar o kernel
mkinitcpio -p (nome do kernel) # EX: mkinitcpio -p linux

➜ Configurar repositório
vim /etc/pacman.conf

➜ Descomentar linha:
#multilib
#incluide

➜ Sincronizar repositórios
pacman -Syy

➜ Senha root
passwd

➜ Criar user
useradd -m -g users -G wheel,audio,video,daemon,dbus,disk,rfkill,games,power,lp,optical,scanner,storage,input -s /bin/bash USER

➜ Criar senha para o user
passwd USER

➜ Editar prioridade SUDO
vim /etc/sudoers

➜ Descomentar linha:
# %wheel ALL=(ALL) ALL

➜ Baixar e instalar o GRUB
# LEGACY
pacman -S grub
grub-install /dev/sda
#############################################################
# UEFI
pacman -S grub efibootmgr
grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=Grub_Arch --recheck

➜ Caso tenha outro OS instalado
pacman -S os-prober ntfs-3g --noconfirm

➜ Atualize o GRUB
grub-mkconfig -o /boot/grub/grub.cfg

# REBOOTA O SISTEMA E TIRA A MIDIA

# Notebooks para se conectar a internet via wifi usa o comando:
nmtui

➜ Identificar a VGA:
lspci | grep VGA

➜ Baixar GPU
➜ Radeon - GPUs mais antigas (AMD)
sudo pacman -S xf86-video-ati --noconfirm

➜ AMDGPU - GPUs mais novas (AMD)
sudo pacman -S xf86-video-amgpu --noconfirm

➜ GPU INTEL
sudo pacman -S xf86-video-intel --noconfirm

➜ GPU Genérico
sudo pacman -S xf86-video-vesa --noconfirm

➜ GPU Nvidia
sudo pacman -S f86-video-nouveau --noconfirm

➜ GPU VB - Virtual Box
sudo pacman -S virtualbox-guest-utils --noconfirm

➜ Baixar alguns pacotes (Xorg-xinit é necessario se quiser iniciar o sistema pelo o startx)
sudo pacman -S xorg xorg-xinit ttf-dejavu pulseaudio-alsa pavucontrol --noconfirm

➜ Baixando i3wm
sudo pacman -S i3
#(Opções: 1,4)

➜ Pacotes necessarios (OPCIONAL)
sudo pacman -S dmenu alacritty feh viewnior imagemagick w3m lxappearance git wget howl thunar firefox-i18n-pt-br scrot flameshot numlockx gnome-disk-utility --noconfirm

➜ Baixando Plasma
sudo pacman -S plasma # Plasma Completo
sudo pacman -S plasma-desktop # Plasma Minimal

➜ Baixando XFCE
sudo pacman -S xfce4 # XFCE minimal
sudo pacman -S xfce4-goodies # XFCE com alguns pacotes integrados

# NOTE: If you have an Intel GPU, make sure you are not using xf86-video-intel with Cinnamon 
as it may freeze at random times otherwise, but you can still move the mouse. 
Use the modesetting driver instead by removing xf86-video-intel (KDE also recommends this).

# modesetting ➜ https://jlk.fjfi.cvut.cz/arch/manpages/man/modesetting.4

➜ Baixando Cinnamon
sudo pacman -S cinnamon # Interface do Cinnamon (OBS: ESSA INTERFACE VEM SEM TERMINAL BAIXE UM)
sudo pacman -S xfce4-terminal # Terminal

➜ Baixando Deepin
sudo pacman -S deepin deepin-extra # Deepin com alguns pacotes integrados

➜ Baixando Mate
sudo pacman -S mate mate-extra # Mate com alguns pacotes integrados

➜ Tela de login - DM (Display Manager) (Opcional)
sudo pacman -S lxdm --noconfirm
systemctl enable lxdm.service

➜ Configurar o .xinitrc (OPCIONAL, PARA INICIAR O I3WM PELO STARTX)
su - USER
echo exec i3 > ~/.xinitrc

# FINALIZADA INSTALAÇÃO do Arch Linux
